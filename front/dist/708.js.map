{"version":3,"sources":["webpack://front/./hooks/useInput.ts","webpack://front/./pages/SignUp/style.ts","webpack://front/./pages/SignUp/index.tsx","webpack://front/./node_modules/react-cookie/es6/Cookies.js","webpack://front/./node_modules/react-cookie/es6/CookiesContext.js","webpack://front/./node_modules/react-cookie/es6/useCookies.js"],"names":["initialData","value","setValue","useState","useCallback","e","target","SignUpWrap","styled","Header","NameColum","EmailColum","BioColum","SignUpForm","Label","Input","ButtonColum","CancleBtn","SignUpBtn","history","name","onChangeName","setName","useInput","singUpError","setSignUpError","singUpSuccess","setSignUpSuccess","email","onChangeEmail","setEmail","bio","onChangeBio","isSingUp","setIsSignUp","cookies","setCookie","useCookies","bodyParameters","jwt","console","log","useEffect","axios","withCredentials","then","res","data","onSubmit","preventDefault","push","headers","catch","error","response","statusCode","type","onChange","placeholder","readOnly","CookiesContext","Cookies","Provider","Consumer","dependencies","useContext","Error","initialCookies","getAll","_a","allCookies","setCookies","previousCookiesRef","useRef","newCookies","oldCookies","_i","dependencies_1","length","dependency","shouldUpdate","current","addChangeListener","removeChangeListener","useMemo","set","bind","remove"],"mappings":"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","file":"708.js","sourcesContent":["import { Dispatch, SetStateAction, useCallback, useState, ChangeEvent } from 'react';\n\ntype ReturnTypes<T> = [T, (e: ChangeEvent<HTMLInputElement>) => void, Dispatch<SetStateAction<T>>];\n\nconst useInput = <T>(initialData: T): ReturnTypes<T> => {\n  const [value, setValue] = useState(initialData);\n  const handler = useCallback((e: ChangeEvent<HTMLInputElement>) => {\n    setValue((e.target.value as unknown) as T);\n  }, []);\n  return [value, handler, setValue];\n};\n\nexport default useInput;\n","import styled from 'styled-components';\n\nexport const SignUpWrap = styled.div`\n  width: 100%;\n  max-width: 1160px;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nexport const Header = styled.header`\n  width: 100%;\n  max-width: 1160px;\n  text-align: center;\n  & h2 {\n    font-size: 50px;\n    margin: 0;\n  }\n  & h3 {\n    margin-top: 0;\n    font-size: 40px;\n  }\n`;\nexport const NameColum = styled.div`\n    width: 100%;\n    max-width: 600px;\n    margin: 0 auto;\n & input{\n    margin-left:48px;\n    margin-bottom: 53px;\n\n }\n}\n`;\n\nexport const EmailColum = styled.div`\n    width: 100%;\n    max-width: 600px;\n    margin: 0 auto;\n & input{\n    margin-left:56px;\n    margin-bottom: 68px;\n\n }\n}\n`;\n\nexport const BioColum = styled.div`\nwidth: 100%;\nmax-width: 600px;\nmargin: 0 auto;\nmargin-bottom: 74px;\n& input{\n    margin-left:75px;\n}\n& label{\n    padding-left:17px;\n}\n}\n`;\n\nexport const SignUpForm = styled.form``;\n\nexport const Label = styled.label`\n  font-size: 38px;\n`;\n\nexport const Input = styled.input`\nborder:none;\nborder-bottom:2px solid;\nwidth: 100%;\nmax-width: 400px;\n}\n`;\nexport const ButtonColum = styled.div`\nwidth: 100%;\nmax-width: 600px;\nmargin: 0 auto;\ntext-align:center;\n}\n`;\n\nexport const CancleBtn = styled.button`\n  width: 150px;\n  height: 42px;\n  margin-left: 117px;\n  font-size: 20px;\n  background-color: FFFFFF;\n  border-radius: 7px;\n`;\n\nexport const SignUpBtn = styled.button`\n  width: 220px;\n  height: 42px;\n  float: right;\n  margin-right: 53px;\n  font-size: 20px;\n  background-color: 333333;\n  border-radius: 7px;\n  color: FFFFFF;\n`;\n","import React, { useCallback, useEffect, useState, ChangeEvent } from 'react';\nimport { Link, RouteComponentProps, Redirect } from 'react-router-dom';\nimport axios, { AxiosResponse } from 'axios';\nimport { useCookies, Cookies } from 'react-cookie';\nimport useInput from '@hooks/useInput';\nimport { useQuery } from 'react-query';\n\nimport {\n  CancleBtn,\n  Header,\n  Input,\n  Label,\n  SignUpBtn,\n  SignUpWrap,\n  NameColum,\n  BioColum,\n  EmailColum,\n  ButtonColum,\n  SignUpForm,\n} from './style';\n\nconst SignUp = ({ history }: RouteComponentProps) => {\n  const [name, onChangeName, setName] = useInput('');\n  const [singUpError, setSignUpError] = useState(false);\n  const [singUpSuccess, setSignUpSuccess] = useState(false);\n  const [email, onChangeEmail, setEmail] = useInput('');\n  const [bio, onChangeBio] = useInput('');\n  const [isSingUp, setIsSignUp] = useState(false);\n  const [cookies, setCookie] = useCookies(['jwt']);\n  // axios.defaults.headers.common['Authorization'] = `Bearer ${cookies.jwt}`;\n  // axios.defaults.headers.get['Content-Type'] = 'application/x-www-form-urlencoded';\n  // const instance = axios.create({\n  //   baseURL: 'http://localhost:8000',\n  // });\n\n  // instance.defaults.headers.common['Authorization'] = `Bearer abccccc`;\n  // instance.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\n\n  const config = {\n    headers: { Authorization: `Bearer ${cookies.jwt}` },\n  };\n\n  const bodyParameters = {\n    name: name,\n    bio: bio,\n  };\n\n  console.log('jwt', cookies);\n  console.log(cookies.jwt);\n\n  useEffect(() => {\n    axios.get('/api/auth/me', { withCredentials: true }).then((res: AxiosResponse) => {\n      console.log(res.data);\n      setEmail(res.data.email);\n      setName(res.data.name);\n    });\n  }, []);\n\n  const onSubmit = useCallback(\n    (e) => {\n      e.preventDefault();\n\n      return axios\n        .post(`/api/auth`, bodyParameters)\n        .then((res) => {\n          history.push('/');\n          console.log(res.headers);\n          setIsSignUp(true);\n        })\n        .catch((error) => {\n          setSignUpError(error.response?.data?.statusCode === 403);\n        });\n    },\n    [name, bio],\n  );\n\n  // const onSubmit = useCallback((e) => {\n  //   e.preventDefault();\n\n  //   axios\n  //     .get(`/api/auth/test`)\n  //     .then((res) => {\n  //       console.log(res.status);\n  //       setIsSignUp(true);\n  //       console.log('TestGet');\n  //     })\n  //     .catch((error) => {\n  //       setSignUpError(error.response?.data?.statusCode === 403);\n  //     });\n  // }, []);\n\n  // console.log('성공', singUpSuccess);\n  // console.log('에러', singUpError);\n\n  // if (isSingUp) {\n  //   return <Redirect to=\"/\" />;\n  // }\n\n  return (\n    <SignUpWrap>\n      <Header>\n        <h2>Welcom CodeHouse</h2>\n        <h3>please input basic member information</h3>\n      </Header>\n      <SignUpForm onSubmit={onSubmit}>\n        <NameColum>\n          <Label>Name</Label>\n          <Input type=\"text\" value={name} onChange={onChangeName} placeholder=\"Input name\" />\n        </NameColum>\n        <EmailColum>\n          <Label>email</Label>\n          <Input type=\"email\" value={email} readOnly />\n        </EmailColum>\n        <BioColum>\n          <Label>Bio</Label>\n          <Input type=\"text\" value={bio} onChange={onChangeBio} placeholder=\"Input Bio\" />\n        </BioColum>\n        <ButtonColum>\n          <CancleBtn>Cancle</CancleBtn>\n          <SignUpBtn type=\"submit\">Sign Up</SignUpBtn>\n        </ButtonColum>\n      </SignUpForm>\n    </SignUpWrap>\n  );\n};\n\nexport default SignUp;\n","import Cookies from 'universal-cookie';\r\nexport default Cookies;\r\n","import * as React from 'react';\r\nimport Cookies from './Cookies';\r\nvar CookiesContext = React.createContext(new Cookies());\r\nexport var Provider = CookiesContext.Provider, Consumer = CookiesContext.Consumer;\r\nexport default CookiesContext;\r\n","import { useContext, useEffect, useState, useRef, useMemo } from 'react';\r\nimport CookiesContext from './CookiesContext';\r\nexport default function useCookies(dependencies) {\r\n    var cookies = useContext(CookiesContext);\r\n    if (!cookies) {\r\n        throw new Error('Missing <CookiesProvider>');\r\n    }\r\n    var initialCookies = cookies.getAll();\r\n    var _a = useState(initialCookies), allCookies = _a[0], setCookies = _a[1];\r\n    var previousCookiesRef = useRef(allCookies);\r\n    useEffect(function () {\r\n        function onChange() {\r\n            var newCookies = cookies.getAll();\r\n            if (shouldUpdate(dependencies || null, newCookies, previousCookiesRef.current)) {\r\n                setCookies(newCookies);\r\n            }\r\n            previousCookiesRef.current = newCookies;\r\n        }\r\n        cookies.addChangeListener(onChange);\r\n        return function () {\r\n            cookies.removeChangeListener(onChange);\r\n        };\r\n    }, [cookies]);\r\n    var setCookie = useMemo(function () { return cookies.set.bind(cookies); }, [cookies]);\r\n    var removeCookie = useMemo(function () { return cookies.remove.bind(cookies); }, [cookies]);\r\n    return [allCookies, setCookie, removeCookie];\r\n}\r\nfunction shouldUpdate(dependencies, newCookies, oldCookies) {\r\n    if (!dependencies) {\r\n        return true;\r\n    }\r\n    for (var _i = 0, dependencies_1 = dependencies; _i < dependencies_1.length; _i++) {\r\n        var dependency = dependencies_1[_i];\r\n        if (newCookies[dependency] !== oldCookies[dependency]) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n"],"sourceRoot":""}